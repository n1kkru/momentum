(()=>{"use strict";var e="42587eb73ebe8d6a90322e74d0ac42b2";function t(e){var t;return t=113==Number(e)?"sunny":Number(e)<=230&&Number(e)>=185?"snowy":Number(e)>=263?"rainy":"cloudy",document.querySelector("#".concat(t)).content}function o(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n)}function n(e){"Escape"===e.key&&o(document.querySelector(".popup_is-opened"))}var r=document.querySelector("#todo-template").content;function c(e){e.remove()}var a=document.querySelector(".main__date"),u=a.querySelector(".main__date-date"),i=a.querySelector(".main__date-time"),l=document.querySelector(".button-tasks"),d=document.querySelector(".icon_weather"),s=document.querySelector(".nav__element-temperature"),m=document.querySelector(".city"),p=document.querySelector(".todos__list"),g=document.querySelector(".popup_type_todo"),S=document.forms["new-todo"],y=S.elements["todo-name"];navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,o=t.longitude,n=t.latitude;localStorage.setItem("coordsLongitude",String(o)),localStorage.setItem("coordsLatitude",String(n))}),(function(){alert("Не получается определить вашу геолокацию")})):alert("Браузер не поддерживает геолокацию. Автоматически выбран г. Краснодар"),localStorage.getItem("weather")?d.append(t(localStorage.getItem("weather"))):d.append(t("113")),localStorage.getItem("city")?m.textContent=localStorage.getItem("city"):m.textContent="Краснодар",localStorage.getItem("temperature")?s.textContent="".concat(localStorage.getItem("temperature")," °C"):m.textContent="25 °C",m.addEventListener("click",(function(){var o;(o="".concat("https://api.weatherstack.com/current?access_key=").concat(e,"&query=").concat(localStorage.getItem("coordsLatitude"),", ").concat(localStorage.getItem("coordsLongitude")),fetch(o,{method:"GET"}).then((function(e){return function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}(e)}))).then((function(e){localStorage.setItem("city",String(e.location.name)),localStorage.setItem("weather",String(e.current.weather_code)),localStorage.setItem("temperature",String(e.current.temperature));var o=t(String(e.current.weather_code));d.append(o),s.textContent="".concat(e.current.temperature," °C"),m.textContent=e.location.name}))})),setTimeout(function e(){var t=new Date,o=t.getDate(),n=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][t.getMonth()],r=function(e){return["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"][e]}(t.getDay());u.textContent="".concat(o," ").concat(n,", ").concat(r),i.textContent=t.toTimeString().slice(0,8),setTimeout((function(){e()}),1e3)}(),1e3),l.addEventListener("click",(function(){g.classList.add("popup_is-opened"),document.addEventListener("keydown",n)})),g.addEventListener("click",(function(e){(e.target.classList.contains("popup__close")||e.target.classList.contains("popup"))&&o(e.currentTarget)})),S.addEventListener("submit",(function(e){e.preventDefault();var t,o,n,a,u,i=(t=y.value,o=c,a=(n=r.querySelector(".todo").cloneNode(!0)).querySelector(".todo__delete-button"),u=n.querySelector(".todo__checkbox"),n.querySelector(".todo__title").textContent=t,a.addEventListener("click",(function(){o(n)})),u.addEventListener("click",(function(e){})),n);p.prepend(i,p.firstChild),p.prepend(i),y.value=""}))})();