(()=>{"use strict";var e="42587eb73ebe8d6a90322e74d0ac42b2";function t(e){var t;return t=113==Number(e)?"sunny":Number(e)<=230&&Number(e)>=185?"snowy":Number(e)>=263?"rainy":"cloudy",document.querySelector("#".concat(t)).content}function o(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n)}function n(e){"Escape"===e.key&&o(document.querySelector(".popup_is-opened"))}var r=document.querySelector("#todo-template").content;function c(e){e.remove()}var a=document.querySelector(".main__date"),u=a.querySelector(".main__date-date"),i=a.querySelector(".main__date-time"),d=document.querySelector(".button-clear"),l=document.querySelector(".button-tasks"),m=document.querySelector(".icon_weather"),s=document.querySelector(".nav__element-temperature"),g=document.querySelector(".city"),p=document.querySelector(".todos__list"),S=document.querySelector(".popup_type_todo"),y=document.forms["new-todo"],_=y.elements["todo-name"];navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,o=t.longitude,n=t.latitude;localStorage.setItem("coordsLongitude",String(o)),localStorage.setItem("coordsLatitude",String(n))}),(function(){alert("Не получается определить вашу геолокацию")})):alert("Браузер не поддерживает геолокацию. Автоматически выбран г. Краснодар"),localStorage.getItem("weather")?m.append(t(localStorage.getItem("weather"))):m.append(t("113")),localStorage.getItem("city")?g.textContent=localStorage.getItem("city"):g.textContent="Краснодар",localStorage.getItem("temperature")?s.textContent="".concat(localStorage.getItem("temperature")," °C"):g.textContent="25 °C",g.addEventListener("click",(function(){var o;(o="".concat("https://api.weatherstack.com/current?access_key=").concat(e,"&query=").concat(localStorage.getItem("coordsLatitude"),", ").concat(localStorage.getItem("coordsLongitude")),fetch(o,{method:"GET"}).then((function(e){return function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}(e)}))).then((function(e){localStorage.setItem("city",String(e.location.name)),localStorage.setItem("weather",String(e.current.weather_code)),localStorage.setItem("temperature",String(e.current.temperature));var o=t(String(e.current.weather_code));m.append(o),s.textContent="".concat(e.current.temperature," °C"),g.textContent=e.location.name}))})),setTimeout(function e(){var t,o,n=new Date,r=n.getDate(),c=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][n.getMonth()],a=function(e){return["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"][e]}(n.getDay());t=n.toTimeString().slice(0,2),o=document.querySelector(".page__content"),0<=Number(t)&&Number(t)<6?o.classList.add("image_night"):6<=Number(t)&&Number(t)<12?o.classList.add("image_morning"):12<=Number(t)&&Number(t)<18?o.classList.add("image_day"):18<=Number(t)&&Number(t)<=23&&o.classList.add("image_evening"),u.textContent="".concat(r," ").concat(c,", ").concat(a),i.textContent=n.toTimeString().slice(0,8),setTimeout((function(){e()}),1e3)}(),1e3),l.addEventListener("click",(function(){S.classList.add("popup_is-opened"),document.addEventListener("keydown",n)})),S.addEventListener("click",(function(e){(e.target.classList.contains("popup__close")||e.target.classList.contains("popup"))&&o(e.currentTarget)})),y.addEventListener("submit",(function(e){e.preventDefault();var t,o,n,a,u,i=(t=_.value,o=c,a=(n=r.querySelector(".todo").cloneNode(!0)).querySelector(".todo__delete-button"),u=n.querySelector(".todo__checkbox"),n.querySelector(".todo__title").textContent=t,a.addEventListener("click",(function(){o(n)})),u.addEventListener("click",(function(e){})),n);p.prepend(i,p.firstChild),p.prepend(i),_.value=""})),d.addEventListener("click",(function(){Array.from(p.children).forEach((function(e){e.children.item(0).checked&&c(e)}))}))})();